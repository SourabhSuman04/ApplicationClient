<div class="user-details-view">
    <div class="view-header">
      <div class="header-content">
        <button class="btn-back" (click)="goBack()">
          <i class="fas fa-arrow-left"></i>
        </button>
        <h2>User Details</h2>
      </div>
      <div class="header-actions">
        <button class="btn btn-outline" (click)="editUser()">
          <i class="fas fa-edit"></i> Edit
        </button>
        <button class="btn btn-danger" (click)="deleteUser()">
          <i class="fas fa-trash-alt"></i> Delete
        </button>
      </div>
    </div>
    
    <div class="user-profile-card">
      <div class="profile-header">
        <div class="profile-avatar">
          <img [src]="user?.imageUrl || 'assets/images/default-avatar.png'" alt="User Avatar">
        </div>
        <div class="profile-info">
          <h3>{{ user?.firstName }} {{ user?.lastName }}</h3>
          <p class="user-email">{{ user?.email }}</p>
          <div class="user-badges">
            <span class="badge" [ngClass]="'badge-' + user?.role?.toLowerCase()">
              {{ user?.role }}
            </span>
            <span class="status-badge" [ngClass]="user?.status?.toLowerCase()">
              {{ user?.status }}
            </span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="details-grid">
      <div class="details-card">
        <div class="card-header">
          <h3>Personal Information</h3>
        </div>
        <div class="card-content">
          <div class="info-group">
            <div class="info-item">
              <span class="info-label">Full Name</span>
              <span class="info-value">{{ user?.firstName }} {{ user?.lastName }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Email</span>
              <span class="info-value">{{ user?.email }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Phone</span>
              <span class="info-value">{{ user?.phone || 'Not provided' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Date of Birth</span>
              <span class="info-value">{{ user?.dateOfBirth  }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Gender</span>
              <span class="info-value">{{ user?.gender || 'Not provided' }}</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="details-card">
        <div class="card-header">
          <h3>Address Information</h3>
        </div>
        <div class="card-content">
          <div class="info-group">
            <div class="info-item">
              <span class="info-label">Street Address</span>
              <span class="info-value">{{ user?.address || 'Not provided' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">City</span>
              <span class="info-value">{{ user?.city || 'Not provided' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">State/Province</span>
              <span class="info-value">{{ user?.state || 'Not provided' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Zip/Postal Code</span>
              <span class="info-value">{{ user?.zipCode || 'Not provided' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Country</span>
              <span class="info-value">{{ getCountryName(user?.country) || 'Not provided' }}</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="details-card">
        <div class="card-header">
          <h3>Account Information</h3>
        </div>
        <div class="card-content">
          <div class="info-group">
            <div class="info-item">
              <span class="info-label">User ID</span>
              <span class="info-value">{{ user?.id }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Role</span>
              <span class="info-value">{{ user?.role }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Status</span>
              <span class="info-value">{{ user?.status }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Created Date</span>
              <span class="info-value">{{ user?.createdDate }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Last Login</span>
              <span class="info-value">{{ user?.lastLogin | date:'medium' }}</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="details-card">
        <div class="card-header">
          <h3>Activity Log</h3>
        </div>
        <div class="card-content">
          <div class="activity-timeline">
            <div class="timeline-item" *ngFor="let activity of activityLog">
              <div class="timeline-icon" [ngClass]="activity.type">
                <i class="fas" [ngClass]="getActivityIcon(activity.type)"></i>
              </div>
              <div class="timeline-content">
                <p class="activity-text">{{ activity.description }}</p>
                <p class="activity-time">{{ activity.timestamp | date:'medium' }}</p>
              </div>
            </div>
            
            <div *ngIf="activityLog.length === 0" class="no-activity">
              <p>No activity recorded for this user.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>